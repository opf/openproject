<!-- Standard Ruby view, please see the controller for comments -->
<%
  label_new_file_storage = t("storages.label_new_file_storage",
                              provider: t("storages.provider_types.#{@storage.short_provider_type}.name"))
%>

<% html_title t(:label_administration), t("project_module_storages"), label_new_file_storage %>
<% local_assigns[:additional_breadcrumb] = label_new_file_storage %>

<%= render(Primer::OpenProject::PageHeader.new) do |header| %>
  <% header.with_title(test_selector: 'storage-new-page-header--title') do %>
    <%= label_new_file_storage %>
  <% end %>

  <% header.with_back_button(href: admin_settings_storages_path, 'aria-label':  I18n.t("button_back")) %>

  <% header.with_parent_link(href: admin_settings_storages_path, 'aria-label':  I18n.t("button_back")) do %>
    <%= t(:project_module_storages) %>
  <% end %>

  <% header.with_description(test_selector: 'storage-new-page-header--description') do %>
    <%=
      t("storages.instructions.new_storage",
        file_storage_docs_link: render(
          Primer::Beta::Link.new(href: ::OpenProject::Static::Links[:storage_docs][:"#{@storage.short_provider_type}_setup"][:href], target: '_blank')
        ) { t("storages.instructions.file_storage_docs_link", provider_name: I18n.t("storages.provider_types.#{@storage.short_provider_type}.name")) }
      ).html_safe
    %>
  <% end %>
<% end %>

<%= render(Storages::Admin::StorageViewComponent.new(@storage)) %>
