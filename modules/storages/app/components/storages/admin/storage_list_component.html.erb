<%=
  if storages.present?
    render(Primer::Beta::BorderBox.new) do |component|
      component.with_header(color: :subtle) do
        grid_layout('op-storage-list', tag: :div, align_items: :center) do |grid|
          grid.with_area(:name, tag: :div) do
            render(Primer::Beta::Text.new(font_weight: :semibold)) { I18n.t('storages.label_name') }
          end

          grid.with_area(:user, tag: :div, color: :subtle, mr: 3) do
            render(Primer::Beta::Text.new(font_weight: :semibold)) { I18n.t('storages.label_creator') }
          end

          grid.with_area(:provider, tag: :div, color: :subtle, mr: 3) do
            render(Primer::Beta::Text.new(font_weight: :semibold)) { I18n.t('storages.label_provider') }
          end

          grid.with_area(:host, tag: :div, color: :subtle) do
            render(Primer::Beta::Text.new(font_weight: :semibold)) { I18n.t('storages.label_host_short') }
          end
        end
      end

      storages.map do |storage|
        component.with_row(scheme: :default, id: storage_row_css_id(storage)) do
          grid_layout('op-storage-list', tag: :div, align_items: :center) do |grid|
            unless storage.configured?
              grid.with_area(:icon, tag: :div) do
                render(Primer::Beta::Octicon.new(:'alert-fill', size: :small, color: :severe, classes: 'mr-2'))
              end
            end

            grid.with_area(:name, tag: :div, mr: 3) do
              render(Primer::Beta::Link.new(href: edit_admin_settings_storage_path(storage), scheme: :primary)) { storage.name }
            end

            grid.with_area(:time, tag: :div, color: :subtle, mr: 3) do
              render(Primer::Beta::Text.new(font_weight: :light)) { I18n.t('activity.item.created_on', datetime: helpers.format_time(storage.created_at)).capitalize }
            end

            grid.with_area(:user, tag: :div, color: :subtle, mr: 3) do
              render(Users::AvatarComponent.new(user: storage.creator, size: :mini, link: false, show_name: true))
            end

            grid.with_area(:provider, tag: :div, color: :subtle, mr: 3) do
              render(Primer::Beta::Truncate.new(font_weight: :light)) { storage.short_provider_type }
            end

            grid.with_area(:host, tag: :div, color: :subtle) do
              render(Primer::Beta::Truncate.new(font_weight: :light)) { storage.host }
            end
          end
        end
      end
    end
  else
    render Primer::Beta::Blankslate.new(border: true) do |component|
      component.with_visual_icon(icon: :cloud)
      component.with_heading(tag: :h2).with_content(I18n.t('storages.storage_list_blank_slate.heading'))
      component.with_description { I18n.t('storages.storage_list_blank_slate.description') }

      component.with_primary_action(href: new_admin_settings_storage_path,
                                    role: :button,
                                    aria: { label: I18n.t("storages.label_add_storage") })
               .with_content(I18n.t("storages.label_add_storage"))
    end
  end
%>
